# RemoteVars

RemoteVars es una librerÃ­a de Node.js para **gestionar variables de entorno de manera remota**, sin depender de `.env` locales. Permite cargar variables desde mÃºltiples providers (`local`, `GitHub`, `HTTP`) y guardarlas en cache. TambiÃ©n incluye un **CLI** y soporte para **preload** en Node o frameworks como React/Next.js.

---

## ðŸ”¹ InstalaciÃ³n

Instala desde tu carpeta local (ajusta la ruta):

```bash
npm install ../remotevars
```

Opcionalmente, para probar el CLI globalmente:

```bash
npm link ../remotevars
```

---

## ðŸ”¹ Estructura del proyecto

```
remotevars/
â”œâ”€ src/
â”‚  â”œâ”€ core/
â”‚  â”‚  â”œâ”€ loader.js       # FunciÃ³n principal loadRemoteVars
â”‚  â”‚  â””â”€ cache.js        # Cache: save, load, clear
â”‚  â”œâ”€ providers/
â”‚  â”‚  â”œâ”€ local.js
â”‚  â”‚  â”œâ”€ github.js
â”‚  â”‚  â”œâ”€ http.js
â”‚  â”‚  â””â”€ index.js        # Exporta todos los providers
â”‚  â”œâ”€ register.js        # Preload automÃ¡tico
â”‚  â””â”€ cli.js             # Interfaz de lÃ­nea de comandos
â”œâ”€ package.json
â””â”€ src/index.js          # Punto de entrada de la librerÃ­a
```

---

## ðŸ”¹ ConfiguraciÃ³n: `.remotevars.json`

Archivo de ejemplo para configurar providers:

```json
{
  "defaultProvider": "local",
  "defaultEnv": "dev",
  "local": {
    "filePath": "./demo-config.json"
  },
  "github": {
    "repo": "usuario/mi-repo",
    "path": "config/dev.json",
    "branch": "main",
    "token": "ghp_TU_TOKEN"
  },
  "http": {
    "url": "https://mi-servidor.com/config/dev.json"
  }
}
```

- `defaultProvider` â†’ provider por defecto si no se pasa `--provider`.  
- `defaultEnv` â†’ env por defecto si no se pasa `--env`.  
- ConfiguraciÃ³n especÃ­fica por provider (`local`, `github`, `http`).

Archivo local de ejemplo (`demo-config.json`):

```json
{
  "VAR1": "value1",
  "VAR2": "value2"
}
```

---

## ðŸ”¹ Uso en Node

```js
import { loadRemoteVars, cache } from "remotevars";

(async () => {
  // Cargar variables desde local
  const vars = await loadRemoteVars({ provider: "local", filePath: "./demo-config.json" });
  console.log(vars);
  console.log(process.env.VAR1);

  // Guardar en cache
  await cache.save(vars);

  // Cargar desde cache
  const cached = await cache.load();
  console.log(cached);
})();
```

---

## ðŸ”¹ CLI

Comandos disponibles:

```bash
remotevars pull           # Carga variables desde el provider y guarda en .env.local
remotevars load           # Carga variables en process.env
remotevars print          # Imprime variables por consola
remotevars clear-cache    # Elimina cache de variables
```

Ejemplo:

```bash
remotevars pull --provider=local --filePath=./demo-config.json
remotevars load --provider=github --repo="user/repo" --path="config/dev.json"
```

- Si no pasas `--provider`, se usa `defaultProvider` del `.remotevars.json`.

---

## ðŸ”¹ Preload automÃ¡tico

Para cargar variables **antes de ejecutar tu app**, usa el flag `-r` de Node:

```bash
node -r remotevars/register index.js
```

- Compatible con Node puro y frameworks como **Next.js** o **Vite/React**.

---

## ðŸ”¹ Tests

- Se usan **Jest** y mocks para providers remotos.  
- Ejecuta tests:

```bash
npm test
```

- Cubre:
  - Local, GitHub y HTTP providers  
  - Cache  
  - Loader E2E

## ðŸ”¹ Licencia

MIT

